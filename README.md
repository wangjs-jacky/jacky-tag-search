# 移动端文本管理系统

一个功能完整的移动端关键字文本管理和查询系统，支持文本的增删改查、关键字标签管理、搜索高亮、数据导入导出等功能。

## ✨ 功能特性

### 📝 文本管理
- **添加文本**：底部浮动按钮快速添加新笔记
- **编辑文本**：点击卡片进入详情页编辑
- **删除文本**：支持软删除（回收站）和永久删除
- **关键字管理**：支持多关键字标签，彩色胶囊显示
- **置顶功能**：重要笔记可置顶显示

### 🔍 搜索查询
- **实时搜索**：300ms 防抖实时搜索
- **多字段搜索**：同时搜索文本内容和关键字
- **高亮显示**：搜索结果中匹配文字黄色高亮
- **搜索状态管理**：顶部导航栏智能切换

### 📋 快速复制
- **一键复制**：长按卡片或详情页快速复制
- **复制统计**：记录每条文本的复制次数
- **降级支持**：Clipboard API 不可用时自动降级

### 🗂️ 视图管理
- **全部笔记**：显示所有未删除的笔记
- **已置顶**：只显示置顶的笔记
- **回收站**：显示已删除的笔记，支持恢复
- **自动清理**：30天后自动永久删除回收站内容

### 📊 数据管理
- **本地存储**：使用 localStorage 持久化数据
- **导入导出**：支持 JSON 格式数据备份
- **数据校验**：导入时自动验证数据格式
- **错误处理**：存储空间不足等异常情况处理

### 🎨 移动端优化
- **响应式设计**：适配 375px-414px 主流手机屏幕
- **触摸手势**：支持长按、滑动等手势操作
- **动画效果**：流畅的过渡动画和交互反馈
- **性能优化**：组件懒加载、防抖搜索等优化

## 🛠️ 技术栈

- **前端框架**：React 18+
- **开发语言**：TypeScript
- **模块系统**：ESModule
- **构建工具**：Vite
- **UI 组件**：Ant Design Mobile
- **工具库**：dayjs、uuid

## 📦 安装和运行

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

### 预览生产版本
```bash
npm run preview
```

## 📁 项目结构

```
src/
├── components/          # 组件目录
│   ├── Header.tsx       # 顶部导航栏
│   ├── Sidebar.tsx      # 侧边栏
│   ├── SearchBar.tsx    # 搜索栏
│   ├── TextCard.tsx     # 文本卡片
│   ├── TextDetail.tsx   # 详情浮层
│   ├── TextEditor.tsx   # 编辑器
│   ├── ActionSheet.tsx  # 操作菜单
│   ├── KeywordTag.tsx   # 关键字标签
│   ├── EmptyState.tsx   # 空状态
│   └── FloatingButton.tsx # 浮动按钮
├── hooks/              # 自定义 Hooks
│   ├── useLocalStorage.ts  # 数据持久化
│   ├── useSearch.ts        # 搜索功能
│   ├── useLongPress.ts     # 长按手势
│   └── useSwipe.ts         # 滑动手势
├── types/              # 类型定义
│   └── index.ts        # 接口和类型
├── utils/              # 工具函数
│   ├── storage.ts      # 存储操作
│   ├── copy.ts         # 复制功能
│   ├── highlight.ts    # 高亮显示
│   ├── date.ts         # 日期处理
│   └── trash.ts        # 回收站逻辑
├── constants/          # 常量定义
│   └── index.ts        # 配置常量
├── App.tsx             # 主应用组件
├── main.tsx            # 应用入口
└── index.css           # 全局样式
```

## 🎯 使用指南

### 基本操作

1. **添加笔记**
   - 点击右下角 "+" 浮动按钮
   - 输入文本内容和关键字
   - 点击保存

2. **查看笔记**
   - 点击笔记卡片查看详情
   - 支持下滑手势关闭详情页

3. **编辑笔记**
   - 在详情页点击编辑按钮
   - 或直接点击笔记卡片进入编辑模式

4. **搜索笔记**
   - 点击顶部搜索图标
   - 输入关键字实时搜索
   - 支持文本内容和关键字搜索

5. **管理笔记**
   - 长按笔记卡片弹出操作菜单
   - 支持复制、置顶、删除等操作

### 高级功能

1. **多选模式**
   - 长按选择"多选"进入多选模式
   - 支持批量删除、置顶等操作

2. **数据备份**
   - 侧边栏选择"导出数据"备份
   - 选择"导入数据"恢复备份

3. **回收站管理**
   - 删除的笔记会移到回收站
   - 30天后自动清理
   - 支持手动恢复或永久删除

## 🔧 配置说明

### 环境变量
项目使用环境变量进行配置，可在 `.env` 文件中设置：

```env
VITE_APP_TITLE=文本管理系统
VITE_APP_VERSION=1.0.0
```

### 自定义配置
在 `src/constants/index.ts` 中可以修改：

- 存储键名
- 颜色主题
- 动画配置
- 搜索配置
- 回收站清理时间

## 📱 移动端适配

### 屏幕尺寸
- 主要适配：375px - 414px（iPhone 6/7/8/SE）
- 平板适配：768px+
- 桌面端：1024px+（居中显示）

### 触摸优化
- 最小点击区域：44x44px
- 按钮间距：至少 8px
- 支持长按、滑动手势
- 防止误触设计

## 🚀 性能优化

### 已实现的优化
- React.memo 组件缓存
- useCallback 和 useMemo 优化
- 搜索防抖处理
- 组件懒加载
- CSS 动画硬件加速

### 建议的进一步优化
- 虚拟滚动（大量数据时）
- Service Worker 离线支持
- 图片懒加载
- 代码分割

## 🐛 问题排查

### 常见问题

1. **数据丢失**
   - 检查浏览器 localStorage 是否被清理
   - 确认浏览器支持 localStorage
   - 检查存储空间是否充足

2. **复制功能失效**
   - 确认在 HTTPS 环境下使用
   - 检查浏览器 Clipboard API 支持
   - 降级方案会自动启用

3. **搜索不工作**
   - 检查输入的关键字是否正确
   - 确认搜索范围（文本内容 + 关键字）
   - 清除搜索重新输入

### 调试模式
开发环境下可以在浏览器控制台查看详细日志：

```javascript
// 查看当前数据
console.log(localStorage.getItem('text-manager-data'));

// 清空数据
localStorage.removeItem('text-manager-data');
```

## 🤝 贡献指南

### 开发规范
- 使用 TypeScript 严格模式
- 遵循 ESLint 代码规范
- 组件使用函数式组件 + Hooks
- 样式使用 CSS Modules 或 styled-components

### 提交规范
- feat: 新功能
- fix: 修复问题
- docs: 文档更新
- style: 代码格式
- refactor: 代码重构
- test: 测试相关
- chore: 构建过程或辅助工具的变动

## 📄 许可证

MIT License

## 🙏 致谢

感谢以下开源项目的支持：
- React
- TypeScript
- Vite
- Ant Design Mobile
- dayjs
- uuid

---

**注意**：这是一个生产级的移动端应用，请确保在正式使用前进行充分测试。
